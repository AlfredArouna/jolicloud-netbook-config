#
# Module definitions maintained by eeepc-config package
# 

# The eee.ko overclocking module was renamed asus_eee.ko in v0.3, this
# alias maintains backwards compatibility

alias eee asus_eee


# The psmouse.ko module contains experimental support for the elantech
# driver, however this code is only enabled if the option "elantech=1" is
# passed to the module. By default, this code is disabled.
# To enable it, uncomment the following line and add to /etc/X11/xorg.conf
# "Input Device" section:   Option "SHMConfig" "true"

#options psmouse elantech=1


# In order to enable support for the internal microphone on the 700-series
# devices, the sound card model has to be forced to 3stack-dig. Eventually
# this step will be unnecessary in a future version of Alsa or the eeepc
# kernel.

install snd_hda_intel \
    if [ `/usr/sbin/dmidecode -s system-product-name` = "700" ]; then \
        /sbin/modprobe --ignore-install snd_hda_intel model=3stack-dig $CMDLINE_OPTS ; \
    else \
        /sbin/modprobe --ignore-install snd_hda_intel $CMDLINE_OPTS; \
    fi


# Setting the power_save and power_save_controller parameters to the
# snd_hda_intel module allow the device to shutdown cleanly, even if
# snd_hda_intel.ko is still loaded.
#
# This removes the need to unload the module before shutting down, but only
# if the EeePC is running BIOS 0802 or later. (Earlier than 0802, this
# doesn't do anything.)

options snd_hda_intel power_save=0 power_save_controller=Y

